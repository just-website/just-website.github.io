!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="./",i(i.s=1)}([function(t,e,i){},function(t,e,i){"use strict";i.r(e);i(0);const n="http://worldtimeapi.org/api/timezone";let s=[];class r{static getTimeZones(){return s.length?Promise.resolve(s):fetch(n).then(t=>t.json()).then(t=>s=t).catch(t=>reject(t))}static filterTimeZones(t){return r.getTimeZones().then(e=>e.filter(e=>e.toLowerCase().includes(t)).slice(0,5))}static getCurrentTime(t){return fetch(`${n}/${t}`).then(t=>t.json()).catch(t=>console.log(t))}}class o{constructor(){this.inputElement=document.querySelector(".js-input"),this.promptElement=document.querySelector(".js-prompt"),this.locationsList=[],this.promptElement.style.display="none",this.init()}init(){this.inputElement.addEventListener("input",this.inputListener(event)),this.promptElement.addEventListener("click",t=>{this.inputElement.value=t.target.dataset.value,this.emitEvent(this.inputElement.value)}),this.inputElement.addEventListener("keydown",t=>{"Enter"===t.key&&this.locationsList.length&&([this.inputElement.value]=this.locationsList,this.emitEvent(this.inputElement.value))})}setPromt(t){t.length&&(this.promptElement.innerHTML="",t.forEach(t=>{this.promptElement.innerHTML+=this.setLocationItem(t)}))}setLocationItem(t){return`\n            <div class="input__field-item" data-value="${t}">${t}</div>\n        `}emitEvent(t){this.inputElement.dispatchEvent(new CustomEvent("setLocation",{detail:t})),this.promptElement.style.display="none"}inputListener(){return t=>{t.target.value?r.filterTimeZones(t.target.value).then(t=>{t.length?(this.locationsList=t,this.setPromt(this.locationsList),this.promptElement.style.display="block"):(this.promptElement.style.display="none",this.locationsList=[])}):this.promptElement.style.display="none"}}}function c(t,e,i,n,s,r,o){try{var c=t[r](o),a=c.value}catch(t){return void i(t)}c.done?e(a):Promise.resolve(a).then(n,s)}class a{constructor(t){this.digitalMode=!0,this.fullForamt=!0,this.timezone=t.timezone,this.startTime=t.datetime.slice(0,19),this.currentTime=new Date(this.startTime),this.template=this.getTemplate(),this.timer,this.init(),this.syncTimer(5)}init(){this.timer=setInterval(()=>{this.setNewTime(null),this.template.dispatchEvent(new CustomEvent("update",{detail:this.currentTime}))},1e3)}syncTime(){var t,e=this;return(t=function*(){const t=yield r.getCurrentTime(e.timezone);e.startTime=t.datetime.slice(0,19),e.currentTime=new Date(e.startTime),e.removeTimer(),e.init()},function(){var e=this,i=arguments;return new Promise((function(n,s){var r=t.apply(e,i);function o(t){c(r,n,s,o,a,"next",t)}function a(t){c(r,n,s,o,a,"throw",t)}o(void 0)}))})()}syncTimer(t){setInterval(()=>{this.syncTime()},6e4*t)}removeTimer(){clearInterval(this.timer)}setNewTime(t){t||this.currentTime.setSeconds(this.currentTime.getSeconds()+1)}getTemplate(){return this.digitalMode?this.digitalTemplate:this.analogTemplate}get hours(){return this.fullForamt?this.parseTime(this.currentTime.getHours()):this.currentTime.getHours()>=12?this.parseTime(this.currentTime.getHours()-12):this.parseTime(this.currentTime.getHours())}get minutes(){return this.parseTime(this.currentTime.getMinutes())}get seconds(){return this.parseTime(this.currentTime.getSeconds())}get city(){return this.timezone?this.timezone.split("/")[1].replace("_"," "):""}get timeFormat(){return this.fullForamt?"":this.currentTime.getHours()<=12?"am":"pm"}get analogHours(){return 360*this.currentTime.getHours()/12+6*this.currentTime.getMinutes()/12}get analogMinutes(){return 360*this.currentTime.getMinutes()/60+6*this.currentTime.getSeconds()/60}get analogSeconds(){return 360*this.currentTime.getSeconds()/60}parseTime(t){let e=String(t);return 1===e.length&&(e="0"+e),e}get digitalTemplate(){const t=document.createElement("div");return t.classList.add("clock-wrapper"),t.innerHTML=`\n            <div class="clock">\n                <div class="clock-format">${this.timeFormat}</div>\n                <div class="clock-hours">${this.hours}</div>\n                :\n                <div class="clock-minutes">${this.minutes}</div>\n                :\n                <div class="clock-seconds">${this.seconds}</div>\n            </div>\n            <div class="clock-name">\n                ${this.city}\n            </div>\n        `,t}get analogTemplate(){const t=document.createElement("div");return t.classList.add("clock-wrapper"),t.innerHTML=`\n            <div class="analog-clock">\n                <div class="hour_hand" style="transform: rotateZ(${this.analogHours}deg)"></div>\n                <div class="minute_hand" style="transform: rotateZ(${this.analogMinutes}deg)"></div>\n                <div class="second_hand" style="transform: rotateZ(${this.analogSeconds}deg)"></div>\n            </div>\n            <div class="clock-name">\n                ${this.city}\n            </div>\n        `,t}}function l(t,e,i,n,s,r,o){try{var c=t[r](o),a=c.value}catch(t){return void i(t)}c.done?e(a):Promise.resolve(a).then(n,s)}new class{constructor(){this.cityInput=new o,this.location="",this.controls=document.querySelector(".js-controls"),this.clockArea=document.querySelector(".js-clock-container"),this.dateArea=document.querySelector(".js-date-day"),this.titleArea=document.querySelector("title"),this.clockList=[],this.titleTime="",this.init()}init(){this.cityInput.inputElement.addEventListener("setLocation",t=>{this.location=t.detail}),this.controls.addEventListener("click",t=>{const e=t.target;this.controlEvent(e)})}controlEvent(t){t.classList.contains("js-btn-add")?this.addClock():t.classList.contains("js-btn-sync")?this.syncClock():t.classList.contains("js-btn-format")?this.clockList.length&&this.clockList.forEach(t=>{t.fullForamt=!t.fullForamt}):t.classList.contains("js-btn-change")&&this.clockList.forEach(t=>t.digitalMode=!t.digitalMode)}syncClock(){this.clockList.forEach(t=>t.syncTime())}addClock(){var t,e=this;return(t=function*(){if(e.location){const t=yield r.getCurrentTime(e.location),i=new a(t);i.template.addEventListener("update",t=>{e.render(),e.titleTime=t.detail,e.setDateDay()}),e.clockList.length&&e.clockList.forEach(t=>t.removeTimer()),e.clockList=[i],e.render(),e.cityInput.inputElement.value="",e.location=""}},function(){var e=this,i=arguments;return new Promise((function(n,s){var r=t.apply(e,i);function o(t){l(r,n,s,o,c,"next",t)}function c(t){l(r,n,s,o,c,"throw",t)}o(void 0)}))})()}render(){this.clockArea.innerHTML="",this.clockList.forEach(t=>{this.clockArea.appendChild(t.getTemplate())}),this.setTitle()}setTitle(){const t=new Date(this.titleTime).toLocaleTimeString();t&&"Invalid Date"!==t&&(this.titleArea.innerHTML=t)}setDateDay(){this.dateArea.innerHTML=new Date(this.titleTime).toLocaleDateString("ru-RU",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}}}]);